<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>회원가입 · GG ACADEMY</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body{background:#0a0b0e;color:#eaf2ff;font-family:ui-sans-serif,-apple-system,'Noto Sans KR',Segoe UI,Roboto,Helvetica,Arial}
.topbar{position:sticky;top:0;z-index:50;background:#07090c;border-bottom:1px solid rgba(255,255,255,.08)}
.topbar .wrap{max-width:1200px;margin:0 auto;padding:10px 16px;display:flex;gap:16px;align-items:center}
.topbar a{color:#dbeafe;text-decoration:none;opacity:.95;padding:6px 10px;border-radius:10px}
.topbar a:hover{background:rgba(255,255,255,.08)}
.card{max-width:640px;margin:28px auto;background:#0e1116;border:1px solid #1f2937;border-radius:16px;box-shadow:0 10px 24px rgba(0,0,0,.25)}
label{display:block;margin-bottom:8px;color:#bfdbfe;font-weight:800}
/* 입력 필드 세로 여백 2배 확대 */
input{width:100%;background:#0b0f14;border:1px solid #1f2937;border-radius:12px;padding:24px 14px;color:#e5eefc;font-size:16px}
input:focus{outline:none;border-color:#38bdf8;box-shadow:0 0 0 3px rgba(56,189,248,.15)}
.btn{display:inline-flex;align-items:center;justify-content:center;height:52px;padding:0 18px;border-radius:12px;font-weight:800}
.btn-primary{background:#2563eb;border:1px solid #1d4ed8}
.btn-primary:hover{background:#1d4ed8}
.help{color:#94a3b8}
.badge{display:inline-flex;align-items:center;gap:6px;background:#0b1324;border:1px solid #243042;color:#c7e1ff;border-radius:9999px;padding:4px 10px;font-weight:800}
</style>
</head>
<body>
<header class="topbar">
  <div class="wrap">
    <a href="index.html" class="brand"><img src="assets/logo.png" alt="GG ACADEMY" style="height:28px"></a>
    <div class="ml-auto"></div>
    <a href="index.html">홈</a>
  </div>
</header>

<main class="px-4">
  <div class="card p-6">
    <div class="text-2xl font-extrabold mb-6">회원가입</div>
    <form id="f" class="space-y-6" novalidate>
      <div>
        <label for="uid">아이디</label>
        <input id="uid" name="uid" autocomplete="username" required placeholder="영문/숫자 4~16자" minlength="4" maxlength="16">
      </div>
      <div>
        <label for="pw">비밀번호</label>
        <div class="relative">
          <input id="pw" name="pw" type="password" autocomplete="new-password" required placeholder="8자 이상" minlength="8">
          <button type="button" id="t" class="absolute right-3 top-3 text-xs text-sky-300">보기</button>
        </div>
      </div>
      <div>
        <label for="realname">성함</label>
        <input id="realname" name="name" required placeholder="홍길동">
      </div>
      <div>
        <label for="phone">연락처</label>
        <div class="flex gap-2 items-stretch">
          <input id="phone" name="phone" required inputmode="tel" placeholder="010-0000-0000" class="flex-1">
          <button type="button" id="sendCode" class="btn badge">인증하기</button>
        </div>
        <div id="codeRow" class="mt-3 hidden">
          <div class="flex gap-2 items-stretch">
            <input id="code" placeholder="인증코드 6자리">
            <button type="button" id="verify" class="btn btn-primary">코드확인</button>
          </div>
          <p id="codeHint" class="help mt-2 text-sm"></p>
        </div>
        <p class="help mt-2 text-sm">* 입력정보는 쿠폰 지급 및 고객 확인용으로만 사용됩니다.</p>
      </div>
      <div class="flex items-center gap-2 text-sm text-slate-300">
        <input id="agree" type="checkbox" required>
        <label for="agree" class="m-0 text-slate-300">(필수) 이용안내 및 쿠폰지급 유의사항에 동의합니다.</label>
      </div>
      <div class="pt-2">
        <button class="btn btn-primary w-full" type="submit" id="submitBtn"><span class="mr-2">가입하기</span><span class="text-red-400 font-extrabold">(1분승인)</span></button>
      </div>
    </form>
  </div>
</main>

<script>
const $=id=>document.getElementById(id);
const pw=$('pw'); const tog=$('t');
tog.addEventListener('click',()=>{ pw.type = (pw.type==='password')?'text':'password'; tog.textContent = (pw.type==='password')?'보기':'숨기기'; });

let phoneVerified=false; let codeValue=''; let codeExp=0;
function genCode(){ return String(Math.floor(100000+Math.random()*900000)); }

$('sendCode').addEventListener('click',()=>{
  const phone = ($('phone').value||'').trim();
  if(!phone){ alert('연락처를 입력해 주세요.'); return; }
  codeValue = genCode(); codeExp = Date.now()+3*60*1000; // 3분 유효
  try{ localStorage.setItem('gg_phone_code', JSON.stringify({code:codeValue,exp:codeExp,phone})); }catch{}
  $('codeRow').classList.remove('hidden');
  $('codeHint').textContent = `코드가 전송되었습니다. (테스트: ${codeValue}, 3분 내 입력)`;
});

$('verify').addEventListener('click',()=>{
  const input = ($('code').value||'').trim();
  if(!input){ alert('코드를 입력해 주세요.'); return; }
  if(Date.now()>codeExp){ alert('인증코드가 만료되었습니다. 다시 요청해 주세요.'); return; }
  if(input!==codeValue){ alert('코드가 일치하지 않습니다.'); return; }
  phoneVerified=true; $('phone').readOnly=true; $('sendCode').disabled=true; $('verify').disabled=true; $('codeHint').textContent='인증 완료되었습니다.';
});

$('f').addEventListener('submit',e=>{
  e.preventDefault();
  const uidEl=$('uid'); const nameEl=$('realname'); const phoneEl=$('phone'); const btn=$('submitBtn');
  const data={ uid:(uidEl.value||'').trim(), name:(nameEl.value||'').trim(), phone:(phoneEl.value||'').trim(), ts:Date.now() };
  if(!data.uid || !data.name || !data.phone){ alert('모든 항목을 입력해주세요.'); return; }
  if(!phoneVerified){ alert('전화번호 인증이 필요합니다.'); return; }
  try{ localStorage.setItem('gg_signup', JSON.stringify(data)); }catch{}
  if(btn){ btn.disabled=true; btn.textContent='승인중…'; }
  setTimeout(()=>{ location.href = 'signup-success.html?name='+encodeURIComponent(data.name); }, 500);
});
</script>
</body>
</html>
